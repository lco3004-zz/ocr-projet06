-- MySQL Script generated by MySQL Workbench
-- Sat Aug  3 16:26:32 2019
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema ocr_projet06
-- -----------------------------------------------------
DROP SCHEMA IF EXISTS `ocr_projet06` ;

-- -----------------------------------------------------
-- Schema ocr_projet06
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `ocr_projet06` DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ;
SHOW WARNINGS;
USE `ocr_projet06` ;

-- -----------------------------------------------------
-- Table `ocr_projet06`.`compte_utilisateur`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ocr_projet06`.`compte_utilisateur` ;

SHOW WARNINGS;
CREATE TABLE IF NOT EXISTS `ocr_projet06`.`compte_utilisateur` (
  `id_compte` INT NOT NULL AUTO_INCREMENT,
  `mdp` VARCHAR(45) NOT NULL DEFAULT 'password',
  `login` VARCHAR(64) NOT NULL DEFAULT 'user',
  `droits` CHAR(1) NOT NULL DEFAULT 'R',
  PRIMARY KEY (`id_compte`))
ENGINE = InnoDB;

SHOW WARNINGS;

-- -----------------------------------------------------
-- Table `ocr_projet06`.`utilisateur`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ocr_projet06`.`utilisateur` ;

SHOW WARNINGS;
CREATE TABLE IF NOT EXISTS `ocr_projet06`.`utilisateur` (
  `id_utilsateur` INT NOT NULL AUTO_INCREMENT,
  `fk_compte_utilisateur_id` INT NOT NULL,
  `nom` VARCHAR(45) NOT NULL,
  `email` VARCHAR(45) NOT NULL DEFAULT '\"ocr.projet06@grimpeur.fr',
  PRIMARY KEY (`id_utilsateur`),
  CONSTRAINT `fk_ocr_pratiquant_ocr_compte_utilisateur`
    FOREIGN KEY (`fk_compte_utilisateur_id`)
    REFERENCES `ocr_projet06`.`compte_utilisateur` (`id_compte`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

SHOW WARNINGS;
CREATE INDEX `fk_ocr_pratiquant_ocr_compte_utilisateur_idx` ON `ocr_projet06`.`utilisateur` (`fk_compte_utilisateur_id` ASC) VISIBLE;

SHOW WARNINGS;

-- -----------------------------------------------------
-- Table `ocr_projet06`.`topo`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ocr_projet06`.`topo` ;

SHOW WARNINGS;
CREATE TABLE IF NOT EXISTS `ocr_projet06`.`topo` (
  `id_topo` INT NOT NULL AUTO_INCREMENT,
  `nom` VARCHAR(256) NOT NULL DEFAULT 'topo_t',
  `est_publie` TINYINT NOT NULL DEFAULT 0,
  `est_disponible` TINYINT NOT NULL DEFAULT 0,
  `utilisateur_id` INT NOT NULL,
  `resume` VARCHAR(256) NULL,
  PRIMARY KEY (`id_topo`),
  CONSTRAINT `fk_ocr_topo_ocr_pratiquant1`
    FOREIGN KEY (`utilisateur_id`)
    REFERENCES `ocr_projet06`.`utilisateur` (`id_utilsateur`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

SHOW WARNINGS;
CREATE INDEX `fk_ocr_topo_ocr_pratiquant1_idx` ON `ocr_projet06`.`topo` (`utilisateur_id` ASC) VISIBLE;

SHOW WARNINGS;

-- -----------------------------------------------------
-- Table `ocr_projet06`.`spot`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ocr_projet06`.`spot` ;

SHOW WARNINGS;
CREATE TABLE IF NOT EXISTS `ocr_projet06`.`spot` (
  `idspot` INT NOT NULL AUTO_INCREMENT,
  `nom` VARCHAR(45) NOT NULL DEFAULT 'spot_s',
  `localisation` VARCHAR(45) NOT NULL DEFAULT 'localisatiion_spot_s',
  PRIMARY KEY (`idspot`))
ENGINE = InnoDB;

SHOW WARNINGS;

-- -----------------------------------------------------
-- Table `ocr_projet06`.`secteur`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ocr_projet06`.`secteur` ;

SHOW WARNINGS;
CREATE TABLE IF NOT EXISTS `ocr_projet06`.`secteur` (
  `idsecteur` INT NOT NULL AUTO_INCREMENT,
  `nom` VARCHAR(45) NOT NULL DEFAULT 'secteur_s',
  `spot_idspot` INT NOT NULL,
  PRIMARY KEY (`idsecteur`),
  CONSTRAINT `fk_secteur_spot1`
    FOREIGN KEY (`spot_idspot`)
    REFERENCES `ocr_projet06`.`spot` (`idspot`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

SHOW WARNINGS;
CREATE INDEX `fk_secteur_spot1_idx` ON `ocr_projet06`.`secteur` (`spot_idspot` ASC) VISIBLE;

SHOW WARNINGS;

-- -----------------------------------------------------
-- Table `ocr_projet06`.`voie`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ocr_projet06`.`voie` ;

SHOW WARNINGS;
CREATE TABLE IF NOT EXISTS `ocr_projet06`.`voie` (
  `idvoie` INT NOT NULL AUTO_INCREMENT,
  `nom` VARCHAR(45) NOT NULL DEFAULT 'voie_v',
  `secteur_idsecteur` INT NOT NULL,
  PRIMARY KEY (`idvoie`),
  CONSTRAINT `fk_voie_secteur1`
    FOREIGN KEY (`secteur_idsecteur`)
    REFERENCES `ocr_projet06`.`secteur` (`idsecteur`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

SHOW WARNINGS;
CREATE INDEX `fk_voie_secteur1_idx` ON `ocr_projet06`.`voie` (`secteur_idsecteur` ASC) VISIBLE;

SHOW WARNINGS;

-- -----------------------------------------------------
-- Table `ocr_projet06`.`longueur`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ocr_projet06`.`longueur` ;

SHOW WARNINGS;
CREATE TABLE IF NOT EXISTS `ocr_projet06`.`longueur` (
  `idlongueur` INT NOT NULL AUTO_INCREMENT,
  `nom` VARCHAR(45) NULL,
  `cotation` VARCHAR(45) NULL,
  `nombre_de_spits` INT NULL,
  `voie_idvoie` INT NOT NULL,
  PRIMARY KEY (`idlongueur`),
  CONSTRAINT `fk_longueur_voie1`
    FOREIGN KEY (`voie_idvoie`)
    REFERENCES `ocr_projet06`.`voie` (`idvoie`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

SHOW WARNINGS;
CREATE INDEX `fk_longueur_voie1_idx` ON `ocr_projet06`.`longueur` (`voie_idvoie` ASC) VISIBLE;

SHOW WARNINGS;

SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;

-- -----------------------------------------------------
-- Data for table `ocr_projet06`.`compte_utilisateur`
-- -----------------------------------------------------
START TRANSACTION;
USE `ocr_projet06`;
INSERT INTO `ocr_projet06`.`compte_utilisateur` (`id_compte`, `mdp`, `login`, `droits`) VALUES (DEFAULT, 'mdp_01', 'login_01', 'U');
INSERT INTO `ocr_projet06`.`compte_utilisateur` (`id_compte`, `mdp`, `login`, `droits`) VALUES (DEFAULT, 'mdp_02', 'login_02', 'M');

COMMIT;


-- -----------------------------------------------------
-- Data for table `ocr_projet06`.`utilisateur`
-- -----------------------------------------------------
START TRANSACTION;
USE `ocr_projet06`;
INSERT INTO `ocr_projet06`.`utilisateur` (`id_utilsateur`, `fk_compte_utilisateur_id`, `nom`, `email`) VALUES (DEFAULT, 1, 'user_01', 'user_01@mail.fr');
INSERT INTO `ocr_projet06`.`utilisateur` (`id_utilsateur`, `fk_compte_utilisateur_id`, `nom`, `email`) VALUES (DEFAULT, 2, 'user_02', 'user_02@mail.fr');

COMMIT;


-- -----------------------------------------------------
-- Data for table `ocr_projet06`.`topo`
-- -----------------------------------------------------
START TRANSACTION;
USE `ocr_projet06`;
INSERT INTO `ocr_projet06`.`topo` (`id_topo`, `nom`, `est_publie`, `est_disponible`, `utilisateur_id`, `resume`) VALUES (DEFAULT, 'topo_01', 1, 1, 1, 'resume_topo_01');

COMMIT;


-- -----------------------------------------------------
-- Data for table `ocr_projet06`.`spot`
-- -----------------------------------------------------
START TRANSACTION;
USE `ocr_projet06`;
INSERT INTO `ocr_projet06`.`spot` (`idspot`, `nom`, `localisation`) VALUES (DEFAULT, 'spot_01', 'localisation_spot01');
INSERT INTO `ocr_projet06`.`spot` (`idspot`, `nom`, `localisation`) VALUES (DEFAULT, 'spot_02', 'localisation_spot02');

COMMIT;


-- -----------------------------------------------------
-- Data for table `ocr_projet06`.`secteur`
-- -----------------------------------------------------
START TRANSACTION;
USE `ocr_projet06`;
INSERT INTO `ocr_projet06`.`secteur` (`idsecteur`, `nom`, `spot_idspot`) VALUES (DEFAULT, 'secteur_01', 1);
INSERT INTO `ocr_projet06`.`secteur` (`idsecteur`, `nom`, `spot_idspot`) VALUES (DEFAULT, 'secteur_02', 2);
INSERT INTO `ocr_projet06`.`secteur` (`idsecteur`, `nom`, `spot_idspot`) VALUES (DEFAULT, 'secteur_03', 1);
INSERT INTO `ocr_projet06`.`secteur` (`idsecteur`, `nom`, `spot_idspot`) VALUES (DEFAULT, 'secteur_04', 2);
INSERT INTO `ocr_projet06`.`secteur` (`idsecteur`, `nom`, `spot_idspot`) VALUES (DEFAULT, DEFAULT, DEFAULT);

COMMIT;


-- -----------------------------------------------------
-- Data for table `ocr_projet06`.`voie`
-- -----------------------------------------------------
START TRANSACTION;
USE `ocr_projet06`;
INSERT INTO `ocr_projet06`.`voie` (`idvoie`, `nom`, `secteur_idsecteur`) VALUES (DEFAULT, 'voie_01', 1);
INSERT INTO `ocr_projet06`.`voie` (`idvoie`, `nom`, `secteur_idsecteur`) VALUES (DEFAULT, 'voie_02', 2);
INSERT INTO `ocr_projet06`.`voie` (`idvoie`, `nom`, `secteur_idsecteur`) VALUES (DEFAULT, 'voie-03', 3);
INSERT INTO `ocr_projet06`.`voie` (`idvoie`, `nom`, `secteur_idsecteur`) VALUES (DEFAULT, 'voie_04', 4);
INSERT INTO `ocr_projet06`.`voie` (`idvoie`, `nom`, `secteur_idsecteur`) VALUES (DEFAULT, DEFAULT, DEFAULT);
INSERT INTO `ocr_projet06`.`voie` (`idvoie`, `nom`, `secteur_idsecteur`) VALUES (DEFAULT, DEFAULT, DEFAULT);

COMMIT;


-- -----------------------------------------------------
-- Data for table `ocr_projet06`.`longueur`
-- -----------------------------------------------------
START TRANSACTION;
USE `ocr_projet06`;
INSERT INTO `ocr_projet06`.`longueur` (`idlongueur`, `nom`, `cotation`, `nombre_de_spits`, `voie_idvoie`) VALUES (DEFAULT, 'longeur_01', '3a', 10, 1);
INSERT INTO `ocr_projet06`.`longueur` (`idlongueur`, `nom`, `cotation`, `nombre_de_spits`, `voie_idvoie`) VALUES (DEFAULT, 'longeur_02', '3b', 20, 2);
INSERT INTO `ocr_projet06`.`longueur` (`idlongueur`, `nom`, `cotation`, `nombre_de_spits`, `voie_idvoie`) VALUES (DEFAULT, 'longeur_03', '3c', 30, 2);
INSERT INTO `ocr_projet06`.`longueur` (`idlongueur`, `nom`, `cotation`, `nombre_de_spits`, `voie_idvoie`) VALUES (DEFAULT, 'longeur_04', '4a', 40, 3);
INSERT INTO `ocr_projet06`.`longueur` (`idlongueur`, `nom`, `cotation`, `nombre_de_spits`, `voie_idvoie`) VALUES (DEFAULT, 'longeur_05', '5a', 50, 3);
INSERT INTO `ocr_projet06`.`longueur` (`idlongueur`, `nom`, `cotation`, `nombre_de_spits`, `voie_idvoie`) VALUES (DEFAULT, 'longeur_06', '6a', 60, 3);
INSERT INTO `ocr_projet06`.`longueur` (`idlongueur`, `nom`, `cotation`, `nombre_de_spits`, `voie_idvoie`) VALUES (DEFAULT, 'longeur_07', '7a', 70, 4);
INSERT INTO `ocr_projet06`.`longueur` (`idlongueur`, `nom`, `cotation`, `nombre_de_spits`, `voie_idvoie`) VALUES (DEFAULT, 'longeur_08', '8a', 80, 4);
INSERT INTO `ocr_projet06`.`longueur` (`idlongueur`, `nom`, `cotation`, `nombre_de_spits`, `voie_idvoie`) VALUES (DEFAULT, 'longeur_09', '9a', 90, 4);
INSERT INTO `ocr_projet06`.`longueur` (`idlongueur`, `nom`, `cotation`, `nombre_de_spits`, `voie_idvoie`) VALUES (DEFAULT, 'longeur_10', '9b', 100, 4);

COMMIT;

